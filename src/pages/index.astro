---
// src/pages/index.astro (modified)
import Base from "../layout/Base.astro";
import { checkAndSetSession } from '../lib/auth'; // Import helper

// Check for existing session
const isLoggedIn = await checkAndSetSession(Astro.cookies); // Use helper

---

<Base title="Home">
  <h1>Welcome</h1>
  {
    isLoggedIn ? (
      <p>
        You are logged in. <a href="/dashboard">Go to Dashboard</a>
      </p>
    ) : (
      <p>
        <a href="/signin">Sign in</a> or <a href="/register">Register</a> to
        access the dashboard.
      </p>
    )
  }
</Base>