---
// src/pages/index.astro
import Base from "../layout/Base.astro";
import { checkAndSetSession } from '../lib/auth';

const isLoggedIn = await checkAndSetSession(Astro.cookies);

---

<Base title="Home">
  <h1>Welcome</h1>
  {
    isLoggedIn ? (
      <p>
        You are logged in. <a href="/dashboard">Go to Dashboard</a>
      </p>
    ) : (
      <p>
        <a href="/signin">Sign in</a> to access the dashboard.
      </p>
    )
  }
</Base>